<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source of the Rust file `src/main.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>main.rs - source</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../normalize.css"><link rel="stylesheet" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../ayu.css" disabled><link rel="stylesheet" href="../../dark.css" disabled><link rel="stylesheet" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script defer src="../../source-script.js"></script><script defer src="../../source-files.js"></script><script defer src="../../main.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc source"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../quantity/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../quantity/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../quantity/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‚ÄòS‚Äô to search, ‚Äò?‚Äô for more options‚Ä¶" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="example-wrap"><pre class="line-numbers"><span id="1">1</span>
<span id="2">2</span>
<span id="3">3</span>
<span id="4">4</span>
<span id="5">5</span>
<span id="6">6</span>
<span id="7">7</span>
<span id="8">8</span>
<span id="9">9</span>
<span id="10">10</span>
<span id="11">11</span>
<span id="12">12</span>
<span id="13">13</span>
<span id="14">14</span>
<span id="15">15</span>
<span id="16">16</span>
<span id="17">17</span>
<span id="18">18</span>
<span id="19">19</span>
<span id="20">20</span>
<span id="21">21</span>
<span id="22">22</span>
<span id="23">23</span>
<span id="24">24</span>
<span id="25">25</span>
<span id="26">26</span>
<span id="27">27</span>
<span id="28">28</span>
<span id="29">29</span>
<span id="30">30</span>
<span id="31">31</span>
<span id="32">32</span>
<span id="33">33</span>
<span id="34">34</span>
<span id="35">35</span>
<span id="36">36</span>
<span id="37">37</span>
<span id="38">38</span>
<span id="39">39</span>
<span id="40">40</span>
<span id="41">41</span>
<span id="42">42</span>
<span id="43">43</span>
<span id="44">44</span>
<span id="45">45</span>
<span id="46">46</span>
<span id="47">47</span>
<span id="48">48</span>
<span id="49">49</span>
<span id="50">50</span>
<span id="51">51</span>
<span id="52">52</span>
<span id="53">53</span>
<span id="54">54</span>
<span id="55">55</span>
<span id="56">56</span>
<span id="57">57</span>
<span id="58">58</span>
<span id="59">59</span>
<span id="60">60</span>
<span id="61">61</span>
<span id="62">62</span>
<span id="63">63</span>
<span id="64">64</span>
<span id="65">65</span>
<span id="66">66</span>
<span id="67">67</span>
<span id="68">68</span>
<span id="69">69</span>
<span id="70">70</span>
<span id="71">71</span>
<span id="72">72</span>
<span id="73">73</span>
<span id="74">74</span>
<span id="75">75</span>
<span id="76">76</span>
<span id="77">77</span>
<span id="78">78</span>
<span id="79">79</span>
<span id="80">80</span>
<span id="81">81</span>
<span id="82">82</span>
<span id="83">83</span>
<span id="84">84</span>
<span id="85">85</span>
<span id="86">86</span>
<span id="87">87</span>
<span id="88">88</span>
<span id="89">89</span>
<span id="90">90</span>
<span id="91">91</span>
<span id="92">92</span>
<span id="93">93</span>
<span id="94">94</span>
<span id="95">95</span>
<span id="96">96</span>
<span id="97">97</span>
<span id="98">98</span>
<span id="99">99</span>
<span id="100">100</span>
<span id="101">101</span>
<span id="102">102</span>
<span id="103">103</span>
<span id="104">104</span>
<span id="105">105</span>
<span id="106">106</span>
<span id="107">107</span>
<span id="108">108</span>
<span id="109">109</span>
<span id="110">110</span>
<span id="111">111</span>
<span id="112">112</span>
<span id="113">113</span>
<span id="114">114</span>
<span id="115">115</span>
<span id="116">116</span>
<span id="117">117</span>
<span id="118">118</span>
<span id="119">119</span>
<span id="120">120</span>
<span id="121">121</span>
<span id="122">122</span>
<span id="123">123</span>
<span id="124">124</span>
<span id="125">125</span>
<span id="126">126</span>
<span id="127">127</span>
<span id="128">128</span>
<span id="129">129</span>
<span id="130">130</span>
<span id="131">131</span>
<span id="132">132</span>
<span id="133">133</span>
<span id="134">134</span>
<span id="135">135</span>
<span id="136">136</span>
<span id="137">137</span>
<span id="138">138</span>
<span id="139">139</span>
<span id="140">140</span>
<span id="141">141</span>
<span id="142">142</span>
<span id="143">143</span>
<span id="144">144</span>
<span id="145">145</span>
<span id="146">146</span>
<span id="147">147</span>
<span id="148">148</span>
<span id="149">149</span>
<span id="150">150</span>
<span id="151">151</span>
<span id="152">152</span>
<span id="153">153</span>
<span id="154">154</span>
<span id="155">155</span>
<span id="156">156</span>
<span id="157">157</span>
<span id="158">158</span>
<span id="159">159</span>
<span id="160">160</span>
<span id="161">161</span>
<span id="162">162</span>
<span id="163">163</span>
<span id="164">164</span>
<span id="165">165</span>
<span id="166">166</span>
<span id="167">167</span>
<span id="168">168</span>
<span id="169">169</span>
<span id="170">170</span>
<span id="171">171</span>
<span id="172">172</span>
<span id="173">173</span>
<span id="174">174</span>
<span id="175">175</span>
<span id="176">176</span>
<span id="177">177</span>
<span id="178">178</span>
<span id="179">179</span>
<span id="180">180</span>
<span id="181">181</span>
<span id="182">182</span>
<span id="183">183</span>
<span id="184">184</span>
<span id="185">185</span>
<span id="186">186</span>
<span id="187">187</span>
<span id="188">188</span>
</pre><pre class="rust"><code><span class="doccomment">//! # The Quantity Programming Language
//! A high-performance statically typed programming language meant for
//! scientific computation, simulation, and system control.
//!
//! Quickly write highly performant code with complete confidence of
//! its correctness!
//!
//! ```qty
//! qty length meters|meter|m
//! qty area meters^2|meter^2|m^2 (length*length)
//!
//! rect_area = area|length l, length w| {
//!     l*w
//! }
//!
//! print rect_area( 12m, 2m )
//! ```
//!
//! &gt; *Please note that all links on this page will redirect you to the official documentation for this project*
//!
//! # The Seven Laws of Quantity
//! Listed below are the laws that describe and define this language, in
//! order of their significance. Clicking any on any of them will take you
//! to a more detailed description of their meaning.
//! 1. [üß™ Law of Reality:](https://joeyame.github.io/quantity/quantity/docs/laws/index.html#1--law-of-reality)  *the world or the state of things as they actually exist*
//! 2. [üéÅ Law of Amenity:](https://joeyame.github.io/quantity/quantity/docs/laws/index.html#2--law-of-amenity)  *an inessential, yet desirable item that provides added comfort*
//! 3. [üìù Law of Brevity:](https://joeyame.github.io/quantity/quantity/docs/laws/index.html#3--law-of-brevity)  *concise and exact use of words in writing or speech*
//! 4. [ü™¢ Law of Tensity:](https://joeyame.github.io/quantity/quantity/docs/laws/index.html#4--law-of-tensity)  *the state of being rigid or inflexible*
//! 5. [‚òÄÔ∏è Law of Clarity:](https://joeyame.github.io/quantity/quantity/docs/laws/index.html#5--law-of-clarity)  *quality or state of being clear*
//! 6. [‚òØÔ∏è Law of Duality:](https://joeyame.github.io/quantity/quantity/docs/laws/index.html#6--law-of-duality)  *an instance of opposition or contrast between two concepts*
//! 7. [üêá Law of Rabbity:](https://joeyame.github.io/quantity/quantity/docs/laws/index.html#7--law-of-rabbity)  *resembling, characteristic of, or containing rabbits*

</span><span class="comment">// ! 8. [Limitations are few](https://joeyame.github.io/quantity/quantity/docs/laws/index.html#limitations-are-few)
// ! 4. [Values have meaning](https://joeyame.github.io/quantity/quantity/docs/laws/index.html#)
// ! 2. [Speed is implicit](https://joeyame.github.io/quantity/quantity/docs/laws/index.html#)
// ! 6. [Functionality is composed](https://joeyame.github.io/quantity/quantity/docs/laws/index.html#)
// ! 7. [Organization is important](https://joeyame.github.io/quantity/quantity/docs/laws/index.html#)
// ! 9. [Documentation is powerful](https://joeyame.github.io/quantity/quantity/docs/laws/index.html#)
// !
// ! ## Table of Contents
// !
// ! | Page                                                                     | Description                                                   |
// ! | ------------------------------------------------------------------------ | ------------------------------------------------------------- |
// ! | [Docs](https://joeyame.github.io/quantity/quantity/docs)                 | Documentation related to the language itself                  |
// ! | [Interface](https://joeyame.github.io/quantity/quantity/interface)       | Documentation about how the interpreter can be run            |
// ! | [Interpreting](https://joeyame.github.io/quantity/quantity/interpreting) | Documentation about the interpreter itself                    |
// ! | [Parsing](https://joeyame.github.io/quantity/quantity/parsing)           | Documentation about how the AST is generated                  |
// ! | [Scanning](https://joeyame.github.io/quantity/quantity/scanning)         | Documentation about how the source code is parsed into tokens |
// !
// End of readme documentation
//
//  | Concept    | Description                                                      |
//  | ---------- | ---------------------------------------------------------------- |
//  | Explicit   | Quantity code shall have no undefined behavior                   |
//  | Beautiful  | Quantity code shall be easy to read and understand               |
//  | Functional | Quantity code shall be purely functional yet organized           |
//  | Expressive | Quantity code shall require minimal boilerplate to be productive |
//
// !
// ! ## Quantity Code Examples
// ! The following snippets of code show what is (or will be) possible using the quantity programming language
// !
// ! ### Quantities
// ! Quantities are the backbone of this language, so it only makes sense to start this guide by making some quantities.
// !
// ! ```qty
// ! // Declaring new quantities for the program
// ! qty length
// ! qty area (length*length)
// ! qty volume (length*area)
// ! qty time
// ! qty rate (length/time)
// ! ```
// !
// ! As you can see, a quantity is basically a system of measurement. They are almost like different realms of numbers. You can add and subtract two `lengths` together, but you cannot add a length to an area or volume. We can, however, move between quantities using multiplication and division. For example, two lengths multiplied together produce an area quantity.
// !
// ! In simple terms, you can think of the quantities as generic data types that can be satisfied by any of their member units.
// !
// ! ### Units
// ! Units and quantities go hand-in-hand. Think of quantities as groupings of units. The length quantity contains meters, feet, lightyears, etc. These can freely be added, subtracted, or even converted between each other.
// !
// ! ```qty
// ! // Declaring new units for the program
// ! length meter|meters|m
// ! length foot|feet|ft = 0.3048m
// ! ```
// !
// ! The first example line above is the declaration of a base unit. It does not need any conversions. Afterwards, the feet unit is declared in relation to the meter unit.
// !
// ! ### Number Literals
// ! Now that we have quantities and units defined, we can start to create number literals with them.
// !
// ! For example, if `34 meters` ever shows up in the code, it will generate a value of 34 and attach it to the meter &#39;type&#39;.
// !
// ! The following code block will show the end value of various expressions:
// ! ```
// ! 45 meters           // 45 meters
// ! 3.281ft             // 1 meter
// ! 1meter * 3.281 feet // 1 meter*meter
// ! ```
// !
// ! ### Name Literals
// ! Naming conventions are much more lax in Quantity than perhaps any other programming language. A name can contain any of the following characters:
// !
// ! | Category   | Acceptable Characters | Start of Name |
// ! | ---------- | --------------------- | ------------- |
// ! | Alphabetic | `a-z` `A-Z`           | Yes           |
// ! | Numeric    | `0-9`                 | No            |
// ! | Symbolic   | `- + * / etc`         | Yes           |
// ! | Emojis     | all                   | Yes           |
// ! *The Start of Name column states whether or not the name can begin with that category of text.*
// !
// !
// ! ### Functions
// ! Since Quantity is a functional language, it has first-class support for functions, which end up being extremely similar to closures in Rust. These functions also include rich support for generic types based on quantities.
// !
// ! ```Rust
// ! area rect_area = |length len, length wid| len * wid
// ! area tri_area = |length base, length height| base * height
// ! ```
// !
// ! There are three main ways to call functions:
// ! 1. Traditional Syntax&lt;br&gt;
// !     The traditional approach is the same across virtually all programming languages. It involves using the function name and passing in every argument.
// !     ```Rust
// !     rect_area(45ft, 10m) // Returns an area value which carries the ft*m flag
// !     ```
// ! 2. Method Syntax&lt;br&gt;
// !     While `Quantity` is not object oriented, we can still benefit from the easier organization that object oriented languages sometimes provide. To use this syntax, the first argument is treated as an object, the function name is treated as a member, and the other arguments are passed into the function as normal.
// !     ```Rust
// !     45ft.rect_area(10m) // Returns an area value which carries the ft*m flag
// !     ```
// ! 3. Operator Syntax&lt;br&gt;
// !     Any function that takes two arguments can be used as an operator. This mostly makes sense with functions that perform actual operations, but this language feature can be used by any dual-argument function.
// !     ```Rust
// !     45ft rect_area 10m // Returns an area value which carries the ft*m flag
// !     ```

</span><span class="kw">use </span>anyhow::Result;
<span class="kw">use </span>clap::Parser;
<span class="kw">use </span>interface::<span class="kw-2">*</span>;
<span class="kw">use </span>std::path::PathBuf;

<span class="comment">// Load in core modules
// #[doc(hidden)]
</span><span class="kw">mod </span>docs;
<span class="attribute">#[doc(hidden)]
</span><span class="kw">mod </span>interface;
<span class="attribute">#[doc(hidden)]
</span><span class="kw">mod </span>interpreting;
<span class="attribute">#[doc(hidden)]
</span><span class="kw">mod </span>parsing;
<span class="attribute">#[doc(hidden)]
</span><span class="kw">mod </span>scanning;

<span class="attribute">#[doc(hidden)]
</span><span class="kw">fn </span>main() -&gt; <span class="prelude-ty">Result</span>&lt;()&gt; {
    <span class="comment">// Get command line arguments
    </span><span class="kw">let </span>cli = Cli::parse();

    <span class="kw">match </span>cli.filename {
        <span class="comment">// If filename is provided, read and execute the file
        </span><span class="prelude-val">Some</span>(name) =&gt; run_file(PathBuf::from(name))<span class="question-mark">?</span>,

        <span class="comment">// Otherwise run the interactive REPL
        </span><span class="prelude-val">None </span>=&gt; run_prompt()<span class="question-mark">?</span>,
    }

    <span class="comment">// Exit with a success
    </span><span class="prelude-val">Ok</span>(())
}

<span class="attribute">#[doc(hidden)]
</span><span class="kw">pub fn </span>run(code: String) {
    <span class="macro">println!</span>(<span class="string">&quot;Scanning the following line:&quot;</span>);
    <span class="macro">println!</span>(<span class="string">&quot;\&quot;{}\&quot;&quot;</span>, code);

    <span class="comment">// Turn source code into tokens
    </span><span class="kw">let </span>tokens = <span class="kw">crate</span>::scanning::scan_source(code);
    <span class="macro">println!</span>(<span class="string">&quot;Token list: {:#?}&quot;</span>, tokens);

    <span class="comment">// Turn tokens into an abstract syntax tree
    </span><span class="kw">let </span>tree = <span class="kw">crate</span>::parsing::Parser::parse_tokens(tokens);
    <span class="macro">println!</span>(<span class="string">&quot;AST {:#?}&quot;</span>, tree);

    <span class="comment">// Interpret the syntax tree
    </span><span class="kw">crate</span>::interpreting::interpret(tree).expect(<span class="string">&quot;Interpreter failed&quot;</span>);
}
</code></pre></div>
</section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="quantity" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.65.0 (897e37553 2022-11-02)" ></div></body></html>